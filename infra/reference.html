

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>API Reference &mdash; Exca 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Explanations" href="explanation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Exca
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Summary</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Exca - Execution and caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="howto.html">How-to guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="explanation.html">Explanations</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#exca.TaskInfra"><code class="docutils literal notranslate"><span class="pre">TaskInfra</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#exca.TaskInfra.apply"><code class="docutils literal notranslate"><span class="pre">TaskInfra.apply()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.TaskInfra.clear_job"><code class="docutils literal notranslate"><span class="pre">TaskInfra.clear_job()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.TaskInfra.clone_obj"><code class="docutils literal notranslate"><span class="pre">TaskInfra.clone_obj()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.TaskInfra.config"><code class="docutils literal notranslate"><span class="pre">TaskInfra.config()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.TaskInfra.iter_cached"><code class="docutils literal notranslate"><span class="pre">TaskInfra.iter_cached()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.TaskInfra.job"><code class="docutils literal notranslate"><span class="pre">TaskInfra.job()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.TaskInfra.job_array"><code class="docutils literal notranslate"><span class="pre">TaskInfra.job_array()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.TaskInfra.obj_infras"><code class="docutils literal notranslate"><span class="pre">TaskInfra.obj_infras()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.TaskInfra.status"><code class="docutils literal notranslate"><span class="pre">TaskInfra.status()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.TaskInfra.uid"><code class="docutils literal notranslate"><span class="pre">TaskInfra.uid()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.TaskInfra.uid_folder"><code class="docutils literal notranslate"><span class="pre">TaskInfra.uid_folder()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#exca.MapInfra"><code class="docutils literal notranslate"><span class="pre">MapInfra</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#exca.MapInfra.apply"><code class="docutils literal notranslate"><span class="pre">MapInfra.apply()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.MapInfra.clone_obj"><code class="docutils literal notranslate"><span class="pre">MapInfra.clone_obj()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.MapInfra.config"><code class="docutils literal notranslate"><span class="pre">MapInfra.config()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.MapInfra.iter_cached"><code class="docutils literal notranslate"><span class="pre">MapInfra.iter_cached()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.MapInfra.obj_infras"><code class="docutils literal notranslate"><span class="pre">MapInfra.obj_infras()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.MapInfra.uid"><code class="docutils literal notranslate"><span class="pre">MapInfra.uid()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.MapInfra.uid_folder"><code class="docutils literal notranslate"><span class="pre">MapInfra.uid_folder()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#exca.SubmitInfra"><code class="docutils literal notranslate"><span class="pre">SubmitInfra</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#exca.SubmitInfra.apply"><code class="docutils literal notranslate"><span class="pre">SubmitInfra.apply()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.SubmitInfra.batch"><code class="docutils literal notranslate"><span class="pre">SubmitInfra.batch()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.SubmitInfra.submit"><code class="docutils literal notranslate"><span class="pre">SubmitInfra.submit()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.SubmitInfra.uid"><code class="docutils literal notranslate"><span class="pre">SubmitInfra.uid()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#associated-classes-and-functions">Associated classes and functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#exca.slurm.SubmititMixin"><code class="docutils literal notranslate"><span class="pre">SubmititMixin</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.workdir.WorkDir"><code class="docutils literal notranslate"><span class="pre">WorkDir</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.ConfDict"><code class="docutils literal notranslate"><span class="pre">ConfDict</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#exca.ConfDict.flat"><code class="docutils literal notranslate"><span class="pre">ConfDict.flat()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#exca.ConfDict.from_args"><code class="docutils literal notranslate"><span class="pre">ConfDict.from_args()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#exca.ConfDict.from_model"><code class="docutils literal notranslate"><span class="pre">ConfDict.from_model()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#exca.ConfDict.from_yaml"><code class="docutils literal notranslate"><span class="pre">ConfDict.from_yaml()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#exca.ConfDict.get"><code class="docutils literal notranslate"><span class="pre">ConfDict.get()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#exca.ConfDict.pop"><code class="docutils literal notranslate"><span class="pre">ConfDict.pop()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#exca.ConfDict.to_uid"><code class="docutils literal notranslate"><span class="pre">ConfDict.to_uid()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#exca.ConfDict.to_yaml"><code class="docutils literal notranslate"><span class="pre">ConfDict.to_yaml()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#exca.ConfDict.update"><code class="docutils literal notranslate"><span class="pre">ConfDict.update()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#exca.cachedict.CacheDict"><code class="docutils literal notranslate"><span class="pre">CacheDict</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#exca.cachedict.CacheDict.frozen_cache_folder"><code class="docutils literal notranslate"><span class="pre">CacheDict.frozen_cache_folder()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#exca.cachedict.CacheDict.keys"><code class="docutils literal notranslate"><span class="pre">CacheDict.keys()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#exca.helpers.find_slurm_job"><code class="docutils literal notranslate"><span class="pre">find_slurm_job()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#exca.helpers.with_infra"><code class="docutils literal notranslate"><span class="pre">with_infra</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Exca</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">API Reference</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/infra/reference.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="exca.TaskInfra">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">exca.</span></span><span class="sig-name descname"><span class="pre">TaskInfra</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'auto'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'local'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'slurm'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'debug'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'{folder}/logs/{user}/%j'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">job_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout_min</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tasks_per_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpus_per_task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpus_per_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mem_gb</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_pickle_size_gb</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_constraint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_partition</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_account</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_qos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_use_srun</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_additional_parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conda_env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#exca.workdir.WorkDir" title="exca.workdir.WorkDir"><span class="pre">WorkDir</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">permissions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">511</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'0'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'cached'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'retry'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'force'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'read-only'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'cached'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_in_ram</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/task.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.TaskInfra" title="Link to this definition"></a></dt>
<dd><p>Processing/caching infrastructure ready to be applied to a pydantic.BaseModel method.
To use it, the configuration must be set as an attribute of a pydantic BaseModel,
then <code class="code docutils literal notranslate"><span class="pre">&#64;infra.apply</span></code> must be set on the parameter-free method to process/cache.
This will effectively replace the function with a cached/remotely-computed version of itself</p>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>folder: optional Path or str</dt><dd><p>Path to directory for dumping/loading the cache on disk, if provided</p>
</dd>
<dt>keep_in_ram: bool</dt><dd><p>if True, adds a cache in RAM of the data once loaded (similar to LRU cache)</p>
</dd>
<dt>mode: str</dt><dd><dl class="simple">
<dt>One of the following:</dt><dd><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;cached&quot;</span></code>: cache is returned if available (error or not),
otherwise computed (and cached)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;retry&quot;</span></code>: cache is returned if available except if it’s an error,
otherwise (re)computed (and cached)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;force&quot;</span></code>: cache is ignored, and result are (re)computed (and cached)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;read-only&quot;</span></code>: never compute anything</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="slurm-submitit-parameters">
<h2>Slurm/submitit parameters<a class="headerlink" href="#slurm-submitit-parameters" title="Link to this heading"></a></h2>
<p>Check out <a class="reference internal" href="#exca.slurm.SubmititMixin" title="exca.slurm.SubmititMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">exca.slurm.SubmititMixin</span></code></a></p>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyTask</span><span class="p">(</span><span class="n">pydantic</span><span class="o">.</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">infra</span><span class="p">:</span> <span class="n">exca</span><span class="o">.</span><span class="n">TaskInfra</span> <span class="o">=</span> <span class="n">exca</span><span class="o">.</span><span class="n">TaskInfra</span><span class="p">()</span>

    <span class="nd">@infra</span><span class="o">.</span><span class="n">apply</span>
    <span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>

<span class="n">cfg</span> <span class="o">=</span> <span class="n">MyTask</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">infra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;folder&quot;</span><span class="p">:</span> <span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="s2">&quot;cluster&quot;</span><span class="p">:</span> <span class="s2">&quot;slurm&quot;</span><span class="p">})</span>
<span class="k">assert</span> <span class="n">cfg</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span> <span class="o">==</span> <span class="mi">24</span>  <span class="c1"># &quot;compute&quot; runs on slurm and is cached</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="exca.TaskInfra.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">C</span></span></em>, <em class="sig-param"><span class="positional-only-separator o"><abbr title="Positional-only parameter separator (PEP 570)"><span class="pre">/</span></abbr></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">C</span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/task.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.TaskInfra.apply" title="Link to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exclude_from_cache_uid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">C</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">C</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Applies the infra on a method taking no parameter (except <cite>self</cite>)</p>
<section id="id1">
<h3>Parameters<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>method: callable</dt><dd><p>a method of a pydantic.BaseModel taking as input an iterable of items
of a type X, and yielding one output of a type Y for each input item.</p>
</dd>
<dt>exclude_from_cache_uid: iterable of str / method / method name</dt><dd><p>fields that must be removed from the uid of the cache (in addition to
the ones already removed from the class uid)</p>
</dd>
</dl>
</section>
<section id="id2">
<h3>Usage<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<p>either decorate with <code class="code docutils literal notranslate"><span class="pre">&#64;infra.apply</span></code> or <code class="code docutils literal notranslate"><span class="pre">&#64;infra.apply(exclude_from_cache_uid=&lt;whatever&gt;)</span></code></p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.TaskInfra.clear_job">
<span class="sig-name descname"><span class="pre">clear_job</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/task.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.TaskInfra.clear_job" title="Link to this definition"></a></dt>
<dd><p>Clears and possibly cancels this task’s job
so that the computation is rerun at the next call</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.TaskInfra.clone_obj">
<span class="sig-name descname"><span class="pre">clone_obj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/task.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.TaskInfra.clone_obj" title="Link to this definition"></a></dt>
<dd><p>Create a new decorated object by applying a diff config to the underlying object</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.TaskInfra.config">
<span class="sig-name descname"><span class="pre">config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#exca.ConfDict" title="exca.confdict.ConfDict"><span class="pre">ConfDict</span></a></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/task.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.TaskInfra.config" title="Link to this definition"></a></dt>
<dd><p>Exports the task configuration as a ConfigDict
ConfDict are dict which split on “.” with extra flatten,
to_uid and to_yaml features</p>
<section id="id3">
<h3>Parameters<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>uid: bool</dt><dd><p>if True, uses the _exclude_from_cls_uid field/method to filter in and out
some fields</p>
</dd>
<dt>exclude_defaults: bool</dt><dd><p>if True, values that are set to defaults are not included</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.TaskInfra.iter_cached">
<span class="sig-name descname"><span class="pre">iter_cached</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">BaseModel</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/task.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.TaskInfra.iter_cached" title="Link to this definition"></a></dt>
<dd><p>Iterate over similar tasks in the cache folder</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.TaskInfra.job">
<span class="sig-name descname"><span class="pre">job</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Job</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">LocalJob</span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/task.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.TaskInfra.job" title="Link to this definition"></a></dt>
<dd><p>Creates or reload the job corresponding to the task</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.TaskInfra.job_array">
<span class="sig-name descname"><span class="pre">job_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_workers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">256</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_empty</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/task.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.TaskInfra.job_array" title="Link to this definition"></a></dt>
<dd><p>Creates a list object to populate
The tasks in the list will be sent as a job array when exiting the context</p>
<section id="parameter">
<h3>Parameter<a class="headerlink" href="#parameter" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>max_workers: int</dt><dd><p>maximum number of jobs in the array that can be running at a given time</p>
</dd>
<dt>allow_empty: bool</dt><dd><p>if False, an exception will be raised when exiting the context if the array is still empty</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.TaskInfra.obj_infras">
<span class="sig-name descname"><span class="pre">obj_infras</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">BaseInfra</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/task.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.TaskInfra.obj_infras" title="Link to this definition"></a></dt>
<dd><p>Returns a dictionary of all infras part of the current model/config
(including sub-configs)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.TaskInfra.status">
<span class="sig-name descname"><span class="pre">status</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'not</span> <span class="pre">submitted'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'running'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'completed'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'failed'</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/task.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.TaskInfra.status" title="Link to this definition"></a></dt>
<dd><p>Provides the status of the job
This can be one of “not submitted”, “running”, “completed” or “failed”</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.TaskInfra.uid">
<span class="sig-name descname"><span class="pre">uid</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/task.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.TaskInfra.uid" title="Link to this definition"></a></dt>
<dd><p>Returns the unique uid of the task</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.TaskInfra.uid_folder">
<span class="sig-name descname"><span class="pre">uid_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/task.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.TaskInfra.uid_folder" title="Link to this definition"></a></dt>
<dd><p>Folder where this task instance is stored</p>
</dd></dl>

</section>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="exca.MapInfra">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">exca.</span></span><span class="sig-name descname"><span class="pre">MapInfra</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'auto'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'local'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'slurm'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'debug'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'threadpool'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'processpool'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'{folder}/logs/{user}/%j'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">job_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout_min</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tasks_per_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpus_per_task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpus_per_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mem_gb</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_pickle_size_gb</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_constraint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_partition</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_account</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_qos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_use_srun</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_additional_parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conda_env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#exca.workdir.WorkDir" title="exca.workdir.WorkDir"><span class="pre">WorkDir</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">permissions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">511</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'0'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_in_ram</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_jobs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">128</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_samples_per_job</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forbid_single_item_computation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'cached'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'force'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'read-only'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'cached'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/map.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.MapInfra" title="Link to this definition"></a></dt>
<dd><p>Processing/caching infrastructure ready to be applied to a pydantic.BaseModel method.
To use it, the configuration can be set as an attribute of a pydantic BaseModel,
then <cite>&#64;infra.apply(item_uid)</cite> must be set on the method to process/cache
this will effectively replace the function with a cached/remotely-computed version of itself</p>
<section id="id4">
<h2>Parameters<a class="headerlink" href="#id4" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>folder: optional Path or str</dt><dd><p>Path to directory for dumping/loading the cache on disk, if provided</p>
</dd>
<dt>keep_in_ram: bool</dt><dd><p>if True, adds a cache in RAM of the data once loaded (similar to LRU cache)</p>
</dd>
<dt>mode: str</dt><dd><dl class="simple">
<dt>One of the following:</dt><dd><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;cached&quot;</span></code>: cache is returned if available (error or not), otherwise computed (and cached)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;force&quot;</span></code>: cache is ignored, and result are (re)computed (and cached)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;read-only&quot;</span></code>: never compute anything</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>cluster: optional str</dt><dd><dl class="simple">
<dt>Where to run the computation, one of:</dt><dd><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">None</span></code>: runs in the current thread</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;debug&quot;</span></code>: submitit debug executor (runs in the current process with <cite>ipdb</cite>)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;local&quot;</span></code>: submitit local executor (runs in a dedicated subprocess)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;slurm&quot;</span></code>: submitit slurm executor (runs in a slurm cluster)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;auto&quot;</span></code>: submitit auto executor (uses slurm if available, otherwise local)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;processpool&quot;</span></code>: runs locally in a <cite>concurrent.future.ProcessPoolExecutor</cite></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;threadpool&quot;</span></code>: runs locally in a <cite>concurrent.future.ThreadPoolExecutor</cite></p></li>
</ul>
</dd>
</dl>
</dd>
<dt>max_jobs: optional int</dt><dd><p>maximum number of submitit jobs or process/thread workers to submit for
running all the map processing</p>
</dd>
<dt>min_samples_per_job: optional int</dt><dd><p>minimum number of samples to compute within each job</p>
</dd>
<dt>forbid_single_item_computation: bool</dt><dd><p>raises if a single item needs to be computed. This can help detect issues
(and overloading the cluster) when all items are supposed to have been precomputed.</p>
</dd>
</dl>
</section>
<section id="id5">
<h2>Slurm/submitit parameters<a class="headerlink" href="#id5" title="Link to this heading"></a></h2>
<p>Check out <a class="reference internal" href="#exca.slurm.SubmititMixin" title="exca.slurm.SubmititMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">exca.slurm.SubmititMixin</span></code></a></p>
</section>
<section id="note">
<h2>Note<a class="headerlink" href="#note" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>the decorated method must take as input an iterable of items of a type X, and yield
one output of a type Y for each input.</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="exca.MapInfra.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_uid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_from_cache_uid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">C</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">C</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/map.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.MapInfra.apply" title="Link to this definition"></a></dt>
<dd><p>Applies the infra on a method taking an iterable of items as input</p>
<section id="id6">
<h3>Parameters<a class="headerlink" href="#id6" title="Link to this heading"></a></h3>
<dl>
<dt>method: callable</dt><dd><p>a method of a pydantic.BaseModel taking as input an iterable of items
of a type X, and yielding one output of a type Y for each input item.</p>
</dd>
<dt>item_uid: callable from item to str</dt><dd><p>function returning a uid from the item of a map</p>
</dd>
<dt>exclude_from_cache_uid: iterable of str / method / method name</dt><dd><p>fields that must be removed from the uid of the cache (in addition to
the ones already removed from the class uid)</p>
</dd>
<dt>cache_type: str</dt><dd><p>name of the cache class to use (inferred by default)
this can for instance be used to enforce eg a memmap instead of loading arrays
The available options include:
- <code class="code docutils literal notranslate"><span class="pre">NumpyArray</span></code>:  stores numpy arrays as npy files (default for np.ndarray)
- <code class="code docutils literal notranslate"><span class="pre">NumpyMemmapArray</span></code>: similar to NumpyArray but reloads arrays as memmaps
- <code class="code docutils literal notranslate"><span class="pre">MemmapArrayFile</span></code>: stores multiple np.ndarray into a unique memmap file</p>
<blockquote>
<div><p>(strongly adviced in case of many arrays)</p>
</div></blockquote>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">PandasDataFrame</span></code>: stores pandas dataframes as csv (default for dataframes)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ParquetPandasDataFrame</span></code>: stores pandas dataframes as parquet files</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">TorchTensor</span></code>: stores torch.Tensor as .pt file (default for tensors)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">Pickle</span></code>: stores object as pickle file (fallback default)</p></li>
</ul>
</dd>
</dl>
</section>
<section id="id7">
<h3>Usage<a class="headerlink" href="#id7" title="Link to this heading"></a></h3>
<p>Decorate the method with <cite>&#64;infra.apply(item_uid=&lt;function&gt;)</cite> (as well
as any additional parameter you want to set)</p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.MapInfra.clone_obj">
<span class="sig-name descname"><span class="pre">clone_obj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/map.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.MapInfra.clone_obj" title="Link to this definition"></a></dt>
<dd><p>Create a new decorated object by applying a diff config to the underlying object</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.MapInfra.config">
<span class="sig-name descname"><span class="pre">config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#exca.ConfDict" title="exca.confdict.ConfDict"><span class="pre">ConfDict</span></a></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/map.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.MapInfra.config" title="Link to this definition"></a></dt>
<dd><p>Exports the task configuration as a ConfigDict
ConfDict are dict which split on “.” with extra flatten,
to_uid and to_yaml features</p>
<section id="id8">
<h3>Parameters<a class="headerlink" href="#id8" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>uid: bool</dt><dd><p>if True, uses the _exclude_from_cls_uid field/method to filter in and out
some fields</p>
</dd>
<dt>exclude_defaults: bool</dt><dd><p>if True, values that are set to defaults are not included</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.MapInfra.iter_cached">
<span class="sig-name descname"><span class="pre">iter_cached</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">BaseModel</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/map.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.MapInfra.iter_cached" title="Link to this definition"></a></dt>
<dd><p>Iterate over similar objects in the cache folder</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.MapInfra.obj_infras">
<span class="sig-name descname"><span class="pre">obj_infras</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">BaseInfra</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/map.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.MapInfra.obj_infras" title="Link to this definition"></a></dt>
<dd><p>Returns a dictionary of all infras part of the current model/config
(including sub-configs)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.MapInfra.uid">
<span class="sig-name descname"><span class="pre">uid</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/map.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.MapInfra.uid" title="Link to this definition"></a></dt>
<dd><p>Returns the unique uid of the task</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.MapInfra.uid_folder">
<span class="sig-name descname"><span class="pre">uid_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/map.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.MapInfra.uid_folder" title="Link to this definition"></a></dt>
<dd><p>Folder where this task instance is stored</p>
</dd></dl>

</section>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="exca.SubmitInfra">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">exca.</span></span><span class="sig-name descname"><span class="pre">SubmitInfra</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'auto'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'local'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'slurm'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'debug'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'{folder}/logs/{user}/%j'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">job_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout_min</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tasks_per_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpus_per_task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpus_per_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mem_gb</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_pickle_size_gb</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_constraint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_partition</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_account</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_qos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_use_srun</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_additional_parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conda_env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#exca.workdir.WorkDir" title="exca.workdir.WorkDir"><span class="pre">WorkDir</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">permissions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">511</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'0'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#exca.SubmitInfra" title="Link to this definition"></a></dt>
<dd><p>[Experimental] Processing infrastructure ready to be applied to a pydantic.BaseModel method.
To use it, the configuration must be set as an attribute of a pydantic BaseModel,
then <code class="code docutils literal notranslate"><span class="pre">&#64;infra.apply</span></code> must be set on the method to process
this will effectively replace the function with a remotely-computed version of itself.
Contrarily to TaskInfra, outputs of the method are not cached, and the method can take arguments</p>
<section id="id9">
<h2>Parameters<a class="headerlink" href="#id9" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>folder: optional Path or str</dt><dd><p>Path to directory for dumping/loading the cache on disk, if provided</p>
</dd>
</dl>
</section>
<section id="id10">
<h2>Slurm/submitit parameters<a class="headerlink" href="#id10" title="Link to this heading"></a></h2>
<p>Check out <a class="reference internal" href="#exca.slurm.SubmititMixin" title="exca.slurm.SubmititMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">exca.slurm.SubmititMixin</span></code></a></p>
</section>
<section id="id11">
<h2>Usage<a class="headerlink" href="#id11" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyTask</span><span class="p">(</span><span class="n">pydantic</span><span class="o">.</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">infra</span><span class="p">:</span> <span class="n">exca</span><span class="o">.</span><span class="n">TaskInfra</span> <span class="o">=</span> <span class="n">exca</span><span class="o">.</span><span class="n">TaskInfra</span><span class="p">()</span>

    <span class="nd">@infra</span><span class="o">.</span><span class="n">apply</span>
    <span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>

<span class="n">cfg</span> <span class="o">=</span> <span class="n">MyTask</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">infra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;folder&quot;</span><span class="p">:</span> <span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="s2">&quot;cluster&quot;</span><span class="p">:</span> <span class="s2">&quot;slurm&quot;</span><span class="p">})</span>
<span class="k">assert</span> <span class="n">cfg</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">25</span>  <span class="c1"># &quot;compute&quot; runs on slurm but is not cached</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">infra</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># runs the computation asynchronously</span>
<span class="k">assert</span> <span class="n">job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span> <span class="o">==</span> <span class="mi">25</span>
</pre></div>
</div>
</section>
<section id="id12">
<h2>Note<a class="headerlink" href="#id12" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>The decorated method can be a staticmethod to avoid pickling the owner object
along with the other parameters.</p></li>
<li><p>This is an experimental infra that is still evolving</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="exca.SubmitInfra.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">C</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">C</span></span></span><a class="headerlink" href="#exca.SubmitInfra.apply" title="Link to this definition"></a></dt>
<dd><p>Applies the infra on a method taking no parameter (except <cite>self</cite>)</p>
<section id="id13">
<h3>Parameter<a class="headerlink" href="#id13" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>method: callable</dt><dd><p>a method of a pydantic.BaseModel taking as input an iterable of items
of a type X, and yielding one output of a type Y for each input item.</p>
</dd>
</dl>
</section>
<section id="id14">
<h3>Usage<a class="headerlink" href="#id14" title="Link to this heading"></a></h3>
<p>Decorate the method with <code class="code docutils literal notranslate"><span class="pre">&#64;infra.apply</span></code></p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.SubmitInfra.batch">
<span class="sig-name descname"><span class="pre">batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_workers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">256</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#exca.SubmitInfra.batch" title="Link to this definition"></a></dt>
<dd><p>Context for batching submissions through infra.submit into a unique array job</p>
<section id="id15">
<h3>Parameter<a class="headerlink" href="#id15" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>max_workers: int</dt><dd><p>maximum number of jobs in the array that can be running at a given time</p>
</dd>
</dl>
</section>
<section id="id16">
<h3>Usage<a class="headerlink" href="#id16" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">cfg</span><span class="o">.</span><span class="n">infra</span><span class="o">.</span><span class="n">batch</span><span class="p">():</span>
    <span class="n">job1</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">infra</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">job2</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">infra</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># job1 and job2 are submitted together as a job array</span>
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.SubmitInfra.submit">
<span class="sig-name descname"><span class="pre">submit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Job</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">LocalJob</span></span></span><a class="headerlink" href="#exca.SubmitInfra.submit" title="Link to this definition"></a></dt>
<dd><p>Submit an asynchroneous job. This call is non-blocking and returns a
<code class="code docutils literal notranslate"><span class="pre">Job</span></code> instance that has a <code class="code docutils literal notranslate"><span class="pre">result()</span></code> method that awaits
for the computation to be over.</p>
<section id="id17">
<h3>Parameters<a class="headerlink" href="#id17" title="Link to this heading"></a></h3>
<p><a href="#id18"><span class="problematic" id="id19">*</span></a>args, <a href="#id20"><span class="problematic" id="id21">**</span></a>kwargs: parameters of the decorated method</p>
</section>
<section id="id22">
<h3>Note<a class="headerlink" href="#id22" title="Link to this heading"></a></h3>
<p>As a reminder, outputs are not cached so submitting several time will
run as many jobs.</p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.SubmitInfra.uid">
<span class="sig-name descname"><span class="pre">uid</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#exca.SubmitInfra.uid" title="Link to this definition"></a></dt>
<dd><p>Returns the unique uid of the task</p>
</dd></dl>

</section>
</dd></dl>

<section id="associated-classes-and-functions">
<h2>Associated classes and functions<a class="headerlink" href="#associated-classes-and-functions" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="exca.slurm.SubmititMixin">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">exca.slurm.</span></span><span class="sig-name descname"><span class="pre">SubmititMixin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'auto'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'local'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'slurm'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'debug'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'{folder}/logs/{user}/%j'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">job_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout_min</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tasks_per_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpus_per_task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpus_per_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mem_gb</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_pickle_size_gb</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_constraint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_partition</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_account</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_qos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_use_srun</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slurm_additional_parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conda_env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#exca.workdir.WorkDir" title="exca.workdir.WorkDir"><span class="pre">WorkDir</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/slurm.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.slurm.SubmititMixin" title="Link to this definition"></a></dt>
<dd><p>Mixin class for creating a submitit runner infra</p>
<section id="id23">
<h3>Parameters<a class="headerlink" href="#id23" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>folder: optional Path or str</dt><dd><p>Path to directory for dumping/loading the cache on disk, if provided</p>
</dd>
<dt>cluster: optional str</dt><dd><dl class="simple">
<dt>Where to run the computation, one of:</dt><dd><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">None</span></code>: runs in the current thread</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;debug&quot;</span></code>: submitit debug executor (runs in the current process with <cite>ipdb</cite>)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;local&quot;</span></code>: submitit local executor (runs in a dedicated subprocess)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;slurm&quot;</span></code>: submitit slurm executor (runs in a slurm cluster)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;auto&quot;</span></code>: submitit auto executor (uses slurm if available, otherwise local)</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>logs: Path or str</dt><dd><p>path to the logs for slurm/local jobs.  One can use <code class="code docutils literal notranslate"><span class="pre">{folder}</span></code> in the string
to define logs as a subfolder of the storage folder, <code class="code docutils literal notranslate"><span class="pre">{user}</span></code> for the user name
and <code class="code docutils literal notranslate"><span class="pre">%j</span></code> (slurm syntax) for the job id</p>
</dd>
<dt>workdir: optional <a class="reference internal" href="#exca.workdir.WorkDir" title="exca.workdir.WorkDir"><code class="xref py py-class docutils literal notranslate"><span class="pre">exca.workdir.WorkDir</span></code></a></dt><dd><p>pydantic config defining whether and how to copy the current workspace to a directory specific for the job
and avoid interferences when working on the code. See <a class="reference internal" href="#exca.workdir.WorkDir" title="exca.workdir.WorkDir"><code class="xref py py-class docutils literal notranslate"><span class="pre">exca.workdir.WorkDir</span></code></a> for details.</p>
</dd>
<dt>name: optional str</dt><dd><p>name of the job</p>
</dd>
<dt>timeout_min: optional int</dt><dd><p>timeout for slurm/local jobs</p>
</dd>
<dt>nodes: optional int</dt><dd><p>number of nodes for slurm jobs</p>
</dd>
<dt>tasks_per_node: optional int</dt><dd><p>number of task nodes for slurm jobs</p>
</dd>
<dt>cpus_per_task: optional int</dt><dd><p>number of cpus per task for slurm jobs</p>
</dd>
<dt>gpus_per_node: optional int</dt><dd><p>number of gpus per node for slurm jobs</p>
</dd>
<dt>mem_gb: float</dt><dd><p>RAM memory to be used in GB</p>
</dd>
<dt>slurm_constraint: optional str</dt><dd><p>node constraint for the job</p>
</dd>
<dt>slurm_account: optional str</dt><dd><p>account to use for the job</p>
</dd>
<dt>slurm_qos: optional str</dt><dd><p>qos to use for the job</p>
</dd>
<dt>slurm_partition: optional str</dt><dd><p>partition for the slurm job</p>
</dd>
<dt>slurm_use_srun: bool</dt><dd><p>use srun in the sbatch file. This is the default in submitit, but not adviced
for jobs triggering more jobs.</p>
</dd>
<dt>slurm_additional_parameters: optional dict</dt><dd><p>additional parameters for slurm that are not first class parameters of this config</p>
</dd>
<dt>conda_env: optional str/path</dt><dd><p>path or name of a conda environment to use in the job. Note that as submitit uses a pickle
that needs to be loaded in the job with the new conda env, the pickle needs to be
compatible. This mostly means that if the env has a different pydantic
version, the job may fail to reload it. Additionally, to allow for different python
versions, the job is dumped with pickle and not cloudpickle, so inline functions
(defined in main or in a notebook) will not be supported.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="exca.workdir.WorkDir">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">exca.workdir.</span></span><span class="sig-name descname"><span class="pre">WorkDir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">copied</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_commit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">includes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">('*.py',)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">excludes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">('__pycache__',</span> <span class="pre">'.git')</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/workdir.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.workdir.WorkDir" title="Link to this definition"></a></dt>
<dd><p>Custom working directory configuration</p>
<section id="id24">
<h3>Parameters<a class="headerlink" href="#id24" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>copied: Sequence[str]</dt><dd><p>list/tuple of names of files, or folders, or packages installed in editable mode
to copy to the new working directory folder.
Relative paths will be moved to the relative equivalent in the new folder, while for
absolute path, the folder/file pointed by the path will be moved directly to the new
folder.</p>
</dd>
<dt>folder: Path/str</dt><dd><p>folder to use as working directory,
if not specified, infra will create one automatically <code class="code docutils literal notranslate"><span class="pre">&lt;infra_uid_folder&gt;/code/&lt;date&gt;-&lt;random_uid&gt;/</span></code>.
The folder is logged so you should be able to see what happened in your stderr/stdout.
This parameter can be used in particular to store the code in a specific location
or reuse workdir from a previous run.</p>
</dd>
<dt>includes: sequence of str</dt><dd><p>file name pattern than must be included (recursively)
folder are always included except if explitely excluded
eg: <code class="code docutils literal notranslate"><span class="pre">[&quot;*.py&quot;]</span></code> to include only python files</p>
</dd>
<dt>excludes: sequence of str</dt><dd><p>file/folder name pattern than mush be excluded</p>
</dd>
<dt>log_commit: bool</dt><dd><p>if True, raises if current working directory is in a git repository
with uncommited changes and logs commit otherwise</p>
</dd>
</dl>
</section>
<section id="notes">
<h3>Notes<a class="headerlink" href="#notes" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Since python privileges current working directory over installed packages,
the copied packages should be the one running in the job
(be careful there can be a few gotchas, eg: for debug cluster or with no cluster,
the import cannot be not reloaded so the current working directory will be used,
but that should not make a difference in theses cases)</p></li>
<li><p>The change of working directory (and possibly the copy) only happens when the
infra is called for submitting the decorated function. Depending on your code,
this may not be at the very beginning of your execution.</p></li>
<li><p>The context is reentrant, upon the second entrance nothing will be updated.</p></li>
</ul>
</section>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="exca.ConfDict">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">exca.</span></span><span class="sig-name descname"><span class="pre">ConfDict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapping</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">MutableMapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/confdict.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.ConfDict" title="Link to this definition"></a></dt>
<dd><p>Dictionary which breaks into sub-dictionnaries on “.” as in a config (see example)
The data can be specified either through “.” keywords or directly through sub-dicts
or a mixture of both.
Lists of dictionaries are processed as list of ConfDict
Also, it has yaml export capabilities as well as uid computation.</p>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h3>
<p><code class="code docutils literal notranslate"><span class="pre">ConDict({&quot;training.optim.lr&quot;:</span> <span class="pre">0.01})</span> <span class="pre">==</span> <span class="pre">{&quot;training&quot;:</span> <span class="pre">{&quot;optim&quot;:</span> <span class="pre">{&quot;lr&quot;:</span> <span class="pre">0.01}}}</span></code></p>
</section>
<section id="id25">
<h3>Note<a class="headerlink" href="#id25" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>This is designed for configurations, so it probably does not scale well to 100k+ keys</p></li>
<li><p>dicts are merged expect if containing the key <code class="code docutils literal notranslate"><span class="pre">&quot;=replace=&quot;</span></code>,
in which case they replace the content. On the other hand, non-dicts always
replace the content.</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="exca.ConfDict.flat">
<span class="sig-name descname"><span class="pre">flat</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/confdict.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.ConfDict.flat" title="Link to this definition"></a></dt>
<dd><p>Returns a flat dictionary such as
{“training.dataloader.lr”: 0.01, “training.optim.name”: “Ada”}</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.ConfDict.from_args">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#exca.ConfDict" title="exca.confdict.ConfDict"><span class="pre">ConfDict</span></a></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/confdict.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.ConfDict.from_args" title="Link to this definition"></a></dt>
<dd><p>Parses a list of Bash-style arguments (e.g., –key=value) into a ConfDict.
typically used as <code class="code docutils literal notranslate"><span class="pre">MyConfig(**ConfDict(sys.argv[1:]))</span></code>
This method supports sub-arguments eg: <code class="code docutils literal notranslate"><span class="pre">--optimizer.lr=0.01</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.ConfDict.from_model">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BaseModel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#exca.ConfDict" title="exca.confdict.ConfDict"><span class="pre">ConfDict</span></a></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/confdict.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.ConfDict.from_model" title="Link to this definition"></a></dt>
<dd><p>Creates a ConfDict based on a pydantic model</p>
<section id="id26">
<h4>Parameters<a class="headerlink" href="#id26" title="Link to this heading"></a></h4>
<dl class="simple">
<dt>model: pydantic.BaseModel</dt><dd><p>the model to convert into a dictionary</p>
</dd>
<dt>uid: bool</dt><dd><p>if True, uses the _exclude_from_cls_uid field/method to filter in and out
some fields</p>
</dd>
<dt>exclude_defaults: bool</dt><dd><p>if True, values that are set to defaults are not included</p>
</dd>
</dl>
</section>
<section id="id27">
<h4>Note<a class="headerlink" href="#id27" title="Link to this heading"></a></h4>
<p><cite>_exclude_from_cls_uid</cite> needs needs to be a list/tuple/set (or classmethod returning it)
with either of both of fields:
- exclude: tuple of field names to be excluded
- force_include: tuple of fields to include in all cases (even if excluded or set to defaults)</p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.ConfDict.from_yaml">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_yaml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">yaml</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">IO</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">IO</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#exca.ConfDict" title="exca.confdict.ConfDict"><span class="pre">ConfDict</span></a></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/confdict.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.ConfDict.from_yaml" title="Link to this definition"></a></dt>
<dd><p>Loads a ConfDict from a yaml string/filepath/file handle.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.ConfDict.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/confdict.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.ConfDict.get" title="Link to this definition"></a></dt>
<dd><p>Return the value for key if key is in the dictionary, else default.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.ConfDict.pop">
<span class="sig-name descname"><span class="pre">pop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">v,</span> <span class="pre">remove</span> <span class="pre">specified</span> <span class="pre">key</span> <span class="pre">and</span> <span class="pre">return</span> <span class="pre">the</span> <span class="pre">corresponding</span> <span class="pre">value.</span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/confdict.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.ConfDict.pop" title="Link to this definition"></a></dt>
<dd><p>If the key is not found, return the default if given; otherwise,
raise a KeyError.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.ConfDict.to_uid">
<span class="sig-name descname"><span class="pre">to_uid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/confdict.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.ConfDict.to_uid" title="Link to this definition"></a></dt>
<dd><p>Provides a unique string for the config</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.ConfDict.to_yaml">
<span class="sig-name descname"><span class="pre">to_yaml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/confdict.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.ConfDict.to_yaml" title="Link to this definition"></a></dt>
<dd><p>Exports the ConfDict to yaml string
and optionnaly to a file if a filepath is provided</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.ConfDict.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapping</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">MutableMapping</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/confdict.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.ConfDict.update" title="Link to this definition"></a></dt>
<dd><p>Updates recursively the keys of the confdict.
No key is removed unless a sub-dictionary contains <code class="code docutils literal notranslate"><span class="pre">&quot;=replace=&quot;:</span> <span class="pre">True</span></code>,
in this case the existing keys in the sub-dictionary are wiped</p>
</dd></dl>

</section>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="exca.cachedict.CacheDict">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">exca.cachedict.</span></span><span class="sig-name descname"><span class="pre">CacheDict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_in_ram</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">permissions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">511</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_write_legacy_key_files</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/cachedict.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.cachedict.CacheDict" title="Link to this definition"></a></dt>
<dd><p>Dictionary-like object that caches and loads data on disk and ram.</p>
<section id="id28">
<h3>Parameters<a class="headerlink" href="#id28" title="Link to this heading"></a></h3>
<dl>
<dt>folder: optional Path or str</dt><dd><p>Path to directory for dumping/loading the cache on disk</p>
</dd>
<dt>keep_in_ram: bool</dt><dd><p>if True, adds a cache in RAM of the data once loaded (similar to LRU cache)</p>
</dd>
<dt>cache_type: str or None</dt><dd><p>type of cache dumper to use (see dumperloader.py file to see existing
options, this include:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;NumpyArray&quot;</span></code>: one .npy file for each array, loaded in ram</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;NumpyMemmapArray&quot;</span></code>: one .npy file for each array, loaded as a memmap</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;MemmapArrayFile&quot;</span></code>: one bytes file per worker, loaded as a memmap, and keeping
an internal cache of the open memmap file (<code class="code docutils literal notranslate"><span class="pre">EXCA_MEMMAP_ARRAY_FILE_MAX_CACHE</span></code> env
variable can be set to reset the cache at a given number of open files, defaults
to 100 000)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;TorchTensor&quot;</span></code>: one .pt file per tensor</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;PandasDataframe&quot;</span></code>: one .csv file per pandas dataframe</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;ParquetPandasDataframe&quot;</span></code>: one .parquet file per pandas dataframe (faster to dump and read)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&quot;DataDict&quot;</span></code>: a dict for which (first-level) fields are dumped using the default
dumper. This is particularly useful to store dict of arrays which would be then loaded
as dict of memmaps.</p></li>
</ul>
</div></blockquote>
<p>If <cite>None</cite>, the type will be deduced automatically and by default use a standard pickle dump.
Loading is handled using the cache_type specified in info files.</p>
</dd>
<dt>permissions: optional int</dt><dd><p>permissions for generated files
use os.chmod / path.chmod compatible numbers, or None to deactivate
eg: 0o777 for all rights to all users</p>
</dd>
</dl>
</section>
<section id="id29">
<h3>Usage<a class="headerlink" href="#id29" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mydict</span> <span class="o">=</span> <span class="n">CacheDict</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">keep_in_ram</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">mydict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>  <span class="c1"># empty if folder was empty</span>
<span class="n">mydict</span><span class="p">[</span><span class="s2">&quot;whatever&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="c1"># stored in both memory cache, and disk :)</span>
<span class="n">mydict2</span> <span class="o">=</span> <span class="n">CacheDict</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">keep_in_ram</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># since mydict and mydict2 share the same folder, the</span>
<span class="c1"># key &quot;whatever&quot; will be in mydict2</span>
<span class="k">assert</span> <span class="s2">&quot;whatever&quot;</span> <span class="ow">in</span> <span class="n">mydict2</span>
</pre></div>
</div>
</section>
<section id="id30">
<h3>Note<a class="headerlink" href="#id30" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Dicts write to .jsonl files to hold keys and how to read the
corresponding item. Different threads write to different jsonl
files to avoid interferences.</p></li>
<li><p>checking repeatedly for content can be slow if unavailable, as
this will repeatedly reload all jsonl files</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="exca.cachedict.CacheDict.frozen_cache_folder">
<span class="sig-name descname"><span class="pre">frozen_cache_folder</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/cachedict.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.cachedict.CacheDict.frozen_cache_folder" title="Link to this definition"></a></dt>
<dd><p>Considers the cache folder as frozen
to prevents reloading key/json files more than once from now.
This is useful to speed up __contains__ statement with many missing
items, which could trigger thousands of file rereads</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="exca.cachedict.CacheDict.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/cachedict.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.cachedict.CacheDict.keys" title="Link to this definition"></a></dt>
<dd><p>Returns the keys in the dictionary
(triggers a cache folder reading if folder is not None)</p>
</dd></dl>

</section>
</dd></dl>

<dl class="py function" id="module-exca.helpers">
<dt class="sig sig-object py" id="exca.helpers.find_slurm_job">
<span class="sig-prename descclassname"><span class="pre">exca.helpers.</span></span><span class="sig-name descname"><span class="pre">find_slurm_job</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">job_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">InfraSlurmJob</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/helpers.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.helpers.find_slurm_job" title="Link to this definition"></a></dt>
<dd><p>Attemps to instantiate a submitit.SlurmJob instance from a cache folder and a <cite>job_id</cite>,
looking for it recursively.
This is based on default configuration of the log folder position
(<code class="code docutils literal notranslate"><span class="pre">&lt;cache</span> <span class="pre">folder&gt;/logs/&lt;username&gt;/&lt;job_id&gt;</span></code>), and some additional heuristic that may be
invalid in other pipelines (skipping logs/wandb folders) so this can fail
with other configurations and may need adaptations, but should answer 95% of cases.</p>
<section id="id31">
<h3>Parameters<a class="headerlink" href="#id31" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>job_id: str</dt><dd><p>the job id</p>
</dd>
<dt>folder: str, Path or None</dt><dd><p>the path of the cache folder. If None, scontrol will be called to try and identify it
automatically (will fail for non-running jobs)</p>
</dd>
</dl>
</section>
<section id="id32">
<h3>Notes<a class="headerlink" href="#id32" title="Link to this heading"></a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>a <code class="code docutils literal notranslate"><span class="pre">submitit.Job</span></code> instance has:</dt><dd><ul>
<li><p><code class="code docutils literal notranslate"><span class="pre">job.paths.stderr/stdout</span></code>: pathlib.Path of the logs</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">job.stderr()/stdout()</span></code>: string of the logs</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">job.result()</span></code>: output of the job (waits in not completed, raises if error)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">job.done()</span></code>: True if job is completed</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>On top of it, the returned job has attributes:</dt><dd><ul>
<li><p><code class="code docutils literal notranslate"><span class="pre">config</span></code>: the full configuration of the job</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">uid_config</span></code>: the non default uid configuration of the job</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>The search assumes there is only one “logs” folder in the path
(as we assume the default configuration of the logs path) and will probably
fail if the cache folder contains /logs/ in it It also assumes there is no /code/ in it.</p></li>
<li><p>Get the err using this line: <code class="code docutils literal notranslate"><span class="pre">out</span> <span class="pre">=</span> <span class="pre">job.stderr().split(&quot;\n&quot;)</span></code></p></li>
</ul>
</section>
<section id="id33">
<h3>Example<a class="headerlink" href="#id33" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">job</span> <span class="o">=</span> <span class="n">find_slurm_job</span><span class="p">(</span><span class="n">job_id</span><span class="o">=</span><span class="n">job_id</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="n">my_folder</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">job</span><span class="o">.</span><span class="n">uid_config</span><span class="p">)</span>  <span class="c1"># see uid (= simplified) config for this job</span>
<span class="nb">print</span><span class="p">(</span><span class="n">job</span><span class="o">.</span><span class="n">stdout</span><span class="p">())</span>  <span class="c1"># print stdout of the job</span>
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="exca.helpers.with_infra">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">exca.helpers.</span></span><span class="sig-name descname"><span class="pre">with_infra</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/facebookresearch/exca/blob/main/exca/helpers.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#exca.helpers.with_infra" title="Link to this definition"></a></dt>
<dd><p>Decorator for adding an infra to a function</p>
<section id="id34">
<h3>Usage<a class="headerlink" href="#id34" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@with_infra</span><span class="p">(</span><span class="n">folder</span><span class="o">=</span><span class="s2">&quot;whatever&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_func</span><span class="p">(</span><span class="o">....</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>or directly <code class="code docutils literal notranslate"><span class="pre">my_func</span> <span class="pre">=</span> <span class="pre">with_infra(folder=&quot;whavetever&quot;)(my_func)</span></code>
then the function will always use this infra.</p>
</section>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="explanation.html" class="btn btn-neutral float-left" title="Explanations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Meta Platforms, Inc.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>